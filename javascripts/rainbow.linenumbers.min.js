window.Rainbow&&(window.Rainbow.linenumbers=function(m){function k(a){if(a.nodeType===Node.TEXT_NODE){a=a.nodeValue.split("\n");for(var b=[],c=0;c<a.length;c++){var d=document.createDocumentFragment();d.appendChild(document.createTextNode(a[c]));b.push(d)}return b}d=a.cloneNode(!1);d.innerHTML="";b=[];for(c=0;c<a.childNodes.length;c++)for(var e=k(a.childNodes[c]),f=0;f<e.length;f++)if(0===f&&0<b.length)b[b.length-1].appendChild(e[0]);else{var g=d.cloneNode(!1);g.appendChild(e[f]);b.push(g)}return b}m.onHighlight(function(a){if(a&&a.parentNode){var b=document.createElement("table");b.className="rainbow";b.setAttribute("data-language",a.getAttribute("data-language"));for(var c=Number(a.getAttribute("data-line")||1),d=k(a),e=0;e<d.length;e++){var f=d[e],g=e+c,h=b.insertRow(-1);h.className="line line-"+g;var l=h.insertCell(-1);l.className="line-number";l.setAttribute("data-line-number",g);g=h.insertCell(-1);g.className="line-code";""===f.textContent&&(f.textContent="\n");g.appendChild(f)}a="pre"===a.nodeName.toLowerCase()?a:a.parentNode;a.innerHTML="";a.appendChild(b)}})}(window.Rainbow));